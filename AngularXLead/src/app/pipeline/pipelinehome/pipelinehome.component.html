<div cdkDropListGroup class="card-container">
    <div *ngFor="let stage of stages; let i = index;" class="stage-card" 
    [class.collapsed]="stage.collapsed" 
    (mouseenter)="onMouseEnter(i)" 
    (mouseleave)="onMouseLeave(i)"
    (click)="toggleCollapse(i)">
        <app-dealheader [stageName]="stage.name" [amount]="stage.amount" [dealCount]="stage.deals.length" [collapsed]="stage.collapsed"></app-dealheader>
        <app-dealbody 
            *ngIf="!stage.collapsed"
            [deals]="stage.deals" 
            [connectedTo]="connectedDropLists"
            [stageName]="stage.name"
            (dealDropped)="onDealDropped($event)">
        </app-dealbody>
        <app-dealfooter *ngIf="stage.hover && !stage.collapsed"></app-dealfooter>
    </div>
</div>
  